[gd_scene load_steps=68 format=3 uid="uid://bgrwxmc03jfth"]

[ext_resource type="Texture2D" uid="uid://b3pj4qb62wavg" path="res://2D-Pixel-Art-Character-Template/Idle/Player Idle 48x48.png" id="1_2m0d2"]
[ext_resource type="Script" uid="uid://chbr6mrhj0l4h" path="res://player/components/player_input_component.gd" id="1_5p1j2"]
[ext_resource type="Texture2D" uid="uid://brjv4ntd8ip6e" path="res://2D-Pixel-Art-Character-Template/Jump/player new jump 48x48.png" id="1_8tqfn"]
[ext_resource type="Texture2D" uid="uid://u1dvmpiwf15h" path="res://2D-Pixel-Art-Character-Template/Run/player run 48x48.png" id="2_2m0d2"]
[ext_resource type="Resource" uid="uid://m6k6p2jv0yfa" path="res://player/player_mapping_context.tres" id="2_v4f8b"]
[ext_resource type="Script" uid="uid://dpepr0ylg6wlu" path="res://player/components/state_component.gd" id="3_48vxt"]
[ext_resource type="Resource" uid="uid://dqicdbc6nfv7e" path="res://player/actions/move.tres" id="3_t8epa"]
[ext_resource type="Script" uid="uid://b58pdy82skwid" path="res://player/components/hurtbox_component.gd" id="4_uewl2"]
[ext_resource type="Resource" path="res://player/actions/jump.tres" id="4_w24id"]
[ext_resource type="Script" uid="uid://i5x0g3uanlah" path="res://player/components/health_component .gd" id="5_ofhxi"]
[ext_resource type="Resource" path="res://player/actions/dash.tres" id="5_uewl2"]
[ext_resource type="Resource" path="res://player/actions/crouch.tres" id="6_ofhxi"]
[ext_resource type="Resource" path="res://player/actions/latch.tres" id="7_yu5hk"]
[ext_resource type="Script" uid="uid://c4c7a116tmbm4" path="res://systems/animation_system.gd" id="9_h5g2s"]
[ext_resource type="Script" uid="uid://bln6wd364xxht" path="res://player/stats/movement_stats.gd" id="9_yu5hk"]
[ext_resource type="Script" uid="uid://sui2aet7dpfb" path="res://player/stats/jump_stats.gd" id="10_q6miu"]
[ext_resource type="Script" uid="uid://7w4jww1v0oqm" path="res://systems/physics_integration_system.gd" id="14_abcde"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yu5hk"]
size = Vector2(24, 33)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_y617q"]
size = Vector2(24, 34)

[sub_resource type="AtlasTexture" id="AtlasTexture_v4f8b"]
atlas = ExtResource("1_8tqfn")
region = Rect2(240, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_8eyfg"]
atlas = ExtResource("1_2m0d2")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_76mgg"]
atlas = ExtResource("1_2m0d2")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ddnt4"]
atlas = ExtResource("1_2m0d2")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_a0lmo"]
atlas = ExtResource("1_2m0d2")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_234y4"]
atlas = ExtResource("1_2m0d2")
region = Rect2(192, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_u8vxv"]
atlas = ExtResource("1_2m0d2")
region = Rect2(240, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_lhjxl"]
atlas = ExtResource("1_2m0d2")
region = Rect2(288, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_y2u3w"]
atlas = ExtResource("1_2m0d2")
region = Rect2(336, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_uyl0s"]
atlas = ExtResource("1_2m0d2")
region = Rect2(384, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_vud74"]
atlas = ExtResource("1_2m0d2")
region = Rect2(432, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_t8epa"]
atlas = ExtResource("1_8tqfn")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_w24id"]
atlas = ExtResource("1_8tqfn")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_uewl2"]
atlas = ExtResource("1_8tqfn")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ofhxi"]
atlas = ExtResource("1_8tqfn")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_yu5hk"]
atlas = ExtResource("1_8tqfn")
region = Rect2(192, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_q6miu"]
atlas = ExtResource("1_8tqfn")
region = Rect2(240, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_stbqk"]
atlas = ExtResource("2_2m0d2")
region = Rect2(0, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_y617q"]
atlas = ExtResource("2_2m0d2")
region = Rect2(48, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_8cy8x"]
atlas = ExtResource("2_2m0d2")
region = Rect2(96, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_610ub"]
atlas = ExtResource("2_2m0d2")
region = Rect2(144, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_ayguc"]
atlas = ExtResource("2_2m0d2")
region = Rect2(192, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_t7u8x"]
atlas = ExtResource("2_2m0d2")
region = Rect2(240, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_lnwue"]
atlas = ExtResource("2_2m0d2")
region = Rect2(288, 0, 48, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_7tnb4"]
atlas = ExtResource("2_2m0d2")
region = Rect2(336, 0, 48, 48)

[sub_resource type="SpriteFrames" id="SpriteFrames_8cy8x"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_v4f8b")
}],
"loop": true,
"name": &"fall",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_8eyfg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_76mgg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ddnt4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a0lmo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_234y4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u8vxv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lhjxl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y2u3w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uyl0s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vud74")
}],
"loop": true,
"name": &"idle",
"speed": 11.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_t8epa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w24id")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uewl2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ofhxi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yu5hk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q6miu")
}],
"loop": true,
"name": &"jump",
"speed": 11.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_stbqk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y617q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8cy8x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_610ub")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ayguc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t7u8x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lnwue")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7tnb4")
}],
"loop": true,
"name": &"run",
"speed": 11.0
}]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mlfor"]
animation = &"falling"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2m0d2"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8nth8"]
animation = &"jumping"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8tqfn"]
animation = &"running"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_stbqk"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_y617q"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8eyfg"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_76mgg"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ddnt4"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a0lmo"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_234y4"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_u8vxv"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lhjxl"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_610ub"]
states/Start/position = Vector2(228, 190)
states/falling/node = SubResource("AnimationNodeAnimation_mlfor")
states/falling/position = Vector2(571, 290)
states/idle/node = SubResource("AnimationNodeAnimation_2m0d2")
states/idle/position = Vector2(325, 303)
states/jumping/node = SubResource("AnimationNodeAnimation_8nth8")
states/jumping/position = Vector2(608, 95)
states/running/node = SubResource("AnimationNodeAnimation_8tqfn")
states/running/position = Vector2(382, 99)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_stbqk"), "idle", "running", SubResource("AnimationNodeStateMachineTransition_y617q"), "running", "idle", SubResource("AnimationNodeStateMachineTransition_8eyfg"), "running", "falling", SubResource("AnimationNodeStateMachineTransition_76mgg"), "running", "jumping", SubResource("AnimationNodeStateMachineTransition_ddnt4"), "idle", "jumping", SubResource("AnimationNodeStateMachineTransition_a0lmo"), "jumping", "falling", SubResource("AnimationNodeStateMachineTransition_234y4"), "falling", "idle", SubResource("AnimationNodeStateMachineTransition_u8vxv"), "falling", "running", SubResource("AnimationNodeStateMachineTransition_lhjxl")]

[sub_resource type="Animation" id="Animation_pcftw"]
resource_name = "idle"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"idle"]
}

[sub_resource type="Animation" id="Animation_cayk5"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"run"]
}

[sub_resource type="Animation" id="Animation_wqfsd"]
resource_name = "run"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"run"]
}

[sub_resource type="Animation" id="Animation_y2u3w"]
resource_name = "jumping"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"jump"]
}

[sub_resource type="Animation" id="Animation_uyl0s"]
resource_name = "falling"
length = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("AnimatedSprite2D:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [&"fall"]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_wpo5q"]
_data = {
&"RESET": SubResource("Animation_cayk5"),
&"falling": SubResource("Animation_uyl0s"),
&"idle": SubResource("Animation_pcftw"),
&"jumping": SubResource("Animation_y2u3w"),
&"running": SubResource("Animation_wqfsd")
}

[sub_resource type="Resource" id="Resource_vud74"]
script = ExtResource("9_yu5hk")
metadata/_custom_type_script = "uid://bln6wd364xxht"

[sub_resource type="Resource" id="Resource_8cy8x"]
script = ExtResource("10_q6miu")
jump_height = 4.5
max_jumps = 2
gravity_scale = 15.0
descending_gravity_factor = 0.9199999999999999
metadata/_custom_type_script = "uid://sui2aet7dpfb"

[node name="Player" type="CharacterBody2D"]

[node name="HurtboxComponent" type="Area2D" parent="." node_paths=PackedStringArray("health_component")]
collision_layer = 0
collision_mask = 4
monitorable = false
script = ExtResource("4_uewl2")
health_component = NodePath("../Components/HealthComponent")
metadata/_custom_type_script = "uid://b58pdy82skwid"

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtboxComponent"]
position = Vector2(0, 0.5)
shape = SubResource("RectangleShape2D_yu5hk")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 1)
shape = SubResource("RectangleShape2D_y617q")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_8cy8x")
animation = &"run"
autoplay = "idle"

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_610ub")
anim_player = NodePath("../AnimationPlayer")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_wpo5q")
}

[node name="Components" type="Node" parent="."]

[node name="HealthComponent" type="Node" parent="Components"]
script = ExtResource("5_ofhxi")
metadata/_custom_type_script = "uid://i5x0g3uanlah"

[node name="PlayerInputComponent" type="Node" parent="Components" node_paths=PackedStringArray("physics_system")]
script = ExtResource("1_5p1j2")
mapping_context = ExtResource("2_v4f8b")
move_action = ExtResource("3_t8epa")
jump_action = ExtResource("4_w24id")
dash_action = ExtResource("5_uewl2")
crouch_action = ExtResource("6_ofhxi")
latch_action = ExtResource("7_yu5hk")
physics_system = NodePath("../../Systems/PhysicsIntegrationSystem")
metadata/_custom_type_script = "uid://chbr6mrhj0l4h"

[node name="MovementStateComponent" type="Node" parent="Components"]
script = ExtResource("3_48vxt")
metadata/_custom_type_script = "uid://dpepr0ylg6wlu"

[node name="Systems" type="Node" parent="."]

[node name="AnimationSystem" type="Node" parent="Systems" node_paths=PackedStringArray("animation_tree", "player_sprite", "mov_state_comp")]
script = ExtResource("9_h5g2s")
animation_tree = NodePath("../../AnimationTree")
player_sprite = NodePath("../../AnimatedSprite2D")
mov_state_comp = NodePath("../../Components/MovementStateComponent")
metadata/_custom_type_script = "uid://c4c7a116tmbm4"

[node name="PhysicsIntegrationSystem" type="Node" parent="Systems" node_paths=PackedStringArray("player_character", "_state_comp")]
script = ExtResource("14_abcde")
player_character = NodePath("../..")
_state_comp = NodePath("../../Components/MovementStateComponent")
_move_stats = SubResource("Resource_vud74")
_jump_stats = SubResource("Resource_8cy8x")
metadata/_custom_type_script = "uid://7w4jww1v0oqm"
